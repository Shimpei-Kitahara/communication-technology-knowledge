# 通信技術解説資料

本資料は、現代の通信技術における主要な概念、プロトコル、サービスについて解説します。

## IP電話・ひかり電話

### ひかり電話について

ひかり電話は，NTT東日本，NTT西日本が光ファイバ回線を用いて提供するIP電話サービスの商品名です。IP電話とは，IPネットワーク（インターネット，フレッツ等の閉域ネットワーク）を使って音声をIPパケットで伝送する電話サービスです。なお，ひかり電話はIP電話の中の1サービスとなります。

### IP電話と加入電話の違い

IP電話と加入電話との違いは，主に経由する「電話網」です。IP電話は「IP電話網」，加入電話は「加入電話網」というそれぞれ別の電話網を利用しています。

また伝送方法では，加入電話は電話機の音声信号を電気信号に変換し，さらに交換機でデジタル信号に変換するだけでした。しかしIP電話では，デジタル信号をさらにIPパケット化し，データを伝送します。

なお，制御用の通信は加入電話では交換機間で行われるのに対し，IP電話ではVoIPアダプタと呼制御用サーバ（SIPサーバ）間で行われます。

### SIP（Session Initiation Protocol）

SIPは，ひかり電話や多くのIP電話で採用されている呼制御プロトコルです。呼制御とは，相手と通話する時の相手を呼び出す処理や，相手を呼び出していることを知らせる処理，呼び出す相手の経路情報や課金の管理などのことをいいます。

SIP以外にも，H.323などの呼制御プロトコルが存在しますが，情報の扱いやすさ（電子メールやHTTPのデータフォーマットに類似等の点）などから，IP電話の呼制御として現在ではSIPが主流になっています。

SIPは，IETF（Internet Engineering Task Force：インターネット技術の標準化団体）によってRFC 3261として規定されている通信プロトコルです。

### RTP（Real-time Transport Protocol）

RTPは，音声や動画などのリアルタイムデータを運ぶためのプロトコルで，リアルタイムにデータを再生することができます。

RTPによる通信では，送信側にてパケット生成時にシーケンス番号（順番）やタイムスタンプ（時間）がRTPパケットのヘッダーに記録されます。受信側では，RTPパケットのヘッダーにあるシーケンス番号によってパケットを正しい順番に並び替え，タイムスタンプによって音声再生のタイミングを決定し，リアルタイムなデータ再生を実現しています。

## ネットワーク基盤

### インターネット接続の仕組み

ブロードバンド回線が普及する以前のインターネットへの接続はダイヤルアップや専用線接続がほとんどでした。ADSLや光ファイバなどの多様な常時接続型サービスが普及し，インターネットにアクセスするお客様は劇的に増加しました。

インターネットに接続するためにはISP（インターネット接続事業者）のインターネット接続サービスを利用しなければなりません。ISPは，主に２つの役割を果たしています：

1. インターネット接続を希望するお客様を自社の通信設備に収容する
2. 自社の通信設備をインターネット相互接続点と接続する

### NGN（Next Generation Network）

NGNは，NTT東日本，NTT西日本が提供するIP通信によるネットワークです。フレッツ光ネクストなどのブロードバンドサービスがあり，ISPへ接続する際の中継網の位置付けにもなります。

お客様は接続時に通信したいISPを指定することで，フレッツ光ネクストのネットワークを経由してインターネットに接続できます。

フレッツ光ネクストでは，ベストエフォート型と帯域確保型の両サービスを提供します：
- **ベストエフォート型**: 通信速度を保証せず，回線の利用状況やISPのネットワークの状況によって通信速度が変化
- **帯域確保型**: 高品質のひかり電話・テレビ電話およびマルチキャスト等のコンテンツ配信向けサービス

## プロトコル

### 通信プロトコルとは

人間社会にいろいろな決まりや約束事があるのと同様に，コンピュータのネットワークにもデータの運び方，サーバへの仕事の依頼方法に関するものなど，いろいろな決まりがあります。プロトコルという言葉はデータ通信に関係する様々な約束事を総称したものです。

データ転送時，いくつかの異なるプロトコルを組み合せて行います。それらのプロトコルを整理して階層構造にしたものを，ネットワーク・アーキテクチャと呼びます。

国際標準のアーキテクチャとしてOSI（OpenSystems Interconnection：開放型システム間相互接続）７階層構造の基本参照モデルがあり，各層の通信手順を明確にし，確実な通信システムを設計するのに役立っています。

### TCP/IPプロトコル

インターネットで基本となるプロトコルはTCP／IPと呼ばれるものです。インターネット４層モデルのインターネットワーク層とトランスポート層に相当します。

#### IP（Internet Protocol）
IP（インターネットワーク層）では２台のデータ端末間にあるネットワークを通過するパケットの経路を選択して，End-End間に相互のデータリンクを確立する役割があります。

#### TCP（Transmission Control Protocol）
TCP（トランスポート層）では，IPで設定した経路に従って確実にデータを送り届けるための役割があります。TCPは，送信側と受信側の間で仮想的な通信路を確立し，受信側は送信パケットを受信すると受信応答（ACK）を返信します。

#### UDP（User Datagram Protocol）
UDPは，送信パケットに対して受信側からACKを返す必要がありません。データ送受信の手順が簡略化されているため，TCPと比較してリアルタイム性が高いという特徴があります。しかし，確実性という点ではTCPに劣ります。

### 接続プロトコル

インターネットに接続するためには，PPPoE（Point-to-Point Protocol over Ethernet）などが用いられます。通信したいISPを指定することで，端末機器とIP通信網との間で認証を行い，接続を確立します。

## 無線LAN技術

### 無線LANの基本

無線LANは世界的に標準化された無線を使用した通信方式のことです。最も一般的な無線LANは，IEEE802.11規格の無線LANです。使用する無線の周波数帯は，2.4GHzと5GHzです。

実用化されている最新の規格は，IEEE802.11acで，以下の通信技術等を用いて最大伝送速度（理論値）が約6.9Gbpsとなっています：
- チャネルボンディング（複数チャネルを束ねて通信）
- MIMO（アクセスポイント⇔端末間の信号の流れを複数にする）

### 周波数帯の特徴

#### 2.4GHz帯
- 無線LAN信号と干渉する電波（妨害波）が存在します（例：電子レンジ，Bluetooth，ワイヤレスカメラ等）
- 隣接チャネル同士が重なっているため，同時に干渉なく使用できるのは1，6，11チャネルなどの3チャネルです

#### 5GHz帯
- 無線LAN信号と干渉する電波（妨害波）が少ない
- チャネルにより利用制限があります：
  - 屋内利用（W52：36，40，44，48チャネル）
  - 屋内利用（W53：52，56，60，64チャネル）
  - 屋外利用（W56：100，104，108，112，116，120，124，128，132，136，140チャネル）

### MIMO技術

MIMO（マイモ）とは，「Multi Input Multi Output」という言葉の略語です。これはマルチなインプットとアウトプット，つまり送受信の経路が複数あるということを指します。MIMOにより同一周波数の複数伝搬路（マルチパス）の利用による高速通信を可能にしています。

### 無線LANのセキュリティ

無線LANの環境でセキュリティをかけないと，次のことが発生することが想定されます：
1. 無線LAN環境に侵入され，重要な情報を盗まれる
2. 無線LAN環境を無断で利用される
3. 通信データを盗聴される

セキュリティ対策のポイントは，アクセス制御と暗号化です：

#### アクセス制御
- **SSID（Service Set ID）の設定**: 親機を識別するためのID
- **MACアドレスフィルタリング**: ネットワーク機器固有のアドレスによる接続制限

#### 暗号化方式
- **WEP（Wired Equivalent Privacy）**: 無線LANの世界で最初に登場した暗号化方式
- **WPA（Wi-Fi Protected Access）**: WEPの代わりとして考えられた方式。TKIP（Temporal Key Integrity Protocol）を採用
- **WPA2（Wi-Fi Protected Access 2）**: より強力な暗号技術であるAES（Advanced Encryption Standard）を採用し，WEPやWPAの欠点をすべて解消

## TV・映像サービス

### フレッツ・テレビ

フレッツ・テレビはNTT東日本，NTT西日本のフレッツ光回線を利用して，スカパーJSAT㈱の提供する放送サービスにより，地上デジタル放送，BSデジタル放送等が受信できるサービスです。

受信・配信拠点において衛星，地上波送信塔からの映像信号をアンテナで受信し，HE（ヘッドエンド）装置でレベル調整，ノイズカット等を実施した上で光送信装置に渡します。光送信装置では電気の映像信号を光化し，光ファイバに伝送しています。

### ひかりTV

ひかりTVは株式会社NTTぷららが運営するフレッツ光回線の利用者向けの映像配信サービスです。網側から送信される映像はIPパケット化されているため，宅内に設置されるSTB（セットトップボックス）で映像化し，テレビで受像することができます。

ひかりTVの映像はIPv6マルチキャストのRTPパケットとして網側から宅内へ送信されてきます。使用帯域は，テレビサービス，ビデオサービスでは8Mbit/s程度，地上デジタル放送IP再送信では14Mbit/s程度となっています。

## VPN・ビジネスネットワーク

### VPNサービスの種類

従来からフレームリレーやATM（Asynchronous Transfer Mode）といった専用線サービスがあり，現在では企業等で多く利用されているネットワークサービスとしてVPN（Virtual Private Network）があります。

VPNのサービス種類としては，インターネット網を介した「インターネットVPN」と通信事業者等の閉域網を介した「IP-VPN」や「広域イーサネット」があります。

### インターネットVPN

インターネットVPNは，インターネット網を介してデータ通信できるサービスです。各拠点のVPNルータ同士でインターネット上に専用の通信経路を形成し，仮想的なネットワークを構築しデータを暗号化して通信します。

暗号化は主にレイヤ3プロトコルのIPsec（IP security）等を利用します。IPsecは，データのセキュリティを保護するのに使用され，ESP（EncapsulatedSecurity Payload：認証機能，暗号化機能），IKE（Internet Key Exchange：鍵交換機能）などのプロトコルから構成されています。

低コストで構築・運用できますが，性能や安全性は経由するインターネットに依存するため，状況によっては安定しない場合があります。

### IP-VPN

IP-VPNは，通信事業者等の閉域網を介してデータ通信できるサービスです。網内のVPN装置間で専用のネットワークを形成しデータ通信します。

網内では，MPLS（Multi-Protocol Label Switching）という技術を利用し，ラベルを付与して利用者ごとのネットワークを識別しています。MPLSは，IPヘッダを参照したIPルーティングではなく，IPv4パケットにラベル付与されるMPLSヘッダを参照したスイッチングであるため，IPルーティングより高速転送を実現しています。

通信事業者等が運用管理するネットワークを利用するため，インターネットVPNに比べて性能や安全性は安定しています。

### 広域イーサネット

広域イーサネットは，通信事業者等の閉域網を介してデータ通信できるサービスです。網内のイーサネットLANに利用者のイーサネットLANを接続し，エンドエンドで広域なLAN間接続を実現できます。

網内では，VLAN（Virtual LAN）という技術を利用し，利用者のネットワークから送信されたイーサネットフレームに対してVLANIDを付与して利用者ごとのネットワークを識別しています。

レイヤ２で構成されるネットワークのため，ルーティング設定を利用者で自由に行えることやIP以外の様々なプロトコルが利用できるため，ネットワーク設計の自由度が高いという特長があります。